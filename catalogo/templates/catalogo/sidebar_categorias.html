<div class="sidebar-filtros">
    <h3>Filtros</h3>

    <form method="GET" action="{% url 'catalogo:lista_catalogo' %}">
        <!-- Buscar por nombre -->
        <input type="text" name="buscar_nombre" placeholder="Buscar..." value="{{ buscar_nombre }}">

        <!-- Filtrar por categoría -->
        <h4>Categorías</h4>
        {% for categoria in categorias %}
            <label>
                <input type="checkbox" name="categorias" value="{{ categoria.id }}"
                    {% if categoria.id|stringformat:"s" in selected_categorias %}checked{% endif %}>
                {{ categoria.nombre }}
            </label>

            <!-- Subcategorías -->
            {% for sub in categoria.subcategorias.all %}
                <label style="margin-left: 20px;">
                    <input type="checkbox" name="subcategorias" value="{{ sub.id }}"
                        {% if sub.id|stringformat:"s" in selected_subcategorias %}checked{% endif %}>
                    {{ sub.nombre }}
                </label>
            {% empty %}
                <p style="margin-left: 20px; font-style: italic;">No hay subcategorías</p>
            {% endfor %}
        {% endfor %}

        <!-- Filtrar por precio -->
        <h4>Precio</h4>
        <label>Min: <input type="number" name="precio_min" value="{{ precio_min }}"></label>
        <label>Max: <input type="number" name="precio_max" value="{{ precio_max }}"></label>

        <button type="submit">Filtrar</button>
    </form>
</div>

<style>
.sidebar-filtros { 
    border: 1px solid #ccc; 
    padding: 15px; 
    border-radius: 8px; 
    margin-bottom: 20px;
}
.sidebar-filtros h3 { margin-bottom: 10px; }
.sidebar-filtros .form-group { margin-bottom: 10px; }
</style>
