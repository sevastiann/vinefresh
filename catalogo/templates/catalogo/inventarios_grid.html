{% load static %}

{% for item in productos %}
<div class="card-producto">

    {% if item.imagen %}
        <img src="{{ item.imagen.url }}" alt="{{ item.nombre }}">
    {% else %}
        <img src="{% static 'img/default.png' %}" alt="Sin imagen">
    {% endif %}

    <h4>{{ item.nombre }}</h4>
    <p class="precio">${{ item.precio }}</p>

    <div class="acciones-producto">
        <button class="btn-detalle" onclick="abrirModal('modal-detalle-{{ seccion }}-{{ item.id }}')">
            ğŸ‘ï¸ Detalle
        </button>

        {% if seccion == 'vinos' %}
            <a class="btn-editar" href="{% url 'catalogo:editar_producto' item.id %}">âœï¸ Editar</a>
        {% else %}
            <a class="btn-editar" href="{% url 'catalogo:editar_combo' item.id %}">âœï¸ Editar</a>
        {% endif %}

        <button class="btn-eliminar" onclick="abrirModal('modal-eliminar-{{ seccion }}-{{ item.id }}')">
            ğŸ—‘ï¸ Eliminar
        </button>
    </div>
</div>

<!-- MODALES -->
<div id="modal-detalle-{{ seccion }}-{{ item.id }}" class="modal">
    <div class="modal-content">
        <span class="close" onclick="cerrarModal('modal-detalle-{{ seccion }}-{{ item.id }}')">&times;</span>

        {% if item.imagen %}
            <img src="{{ item.imagen.url }}" class="modal-img">
        {% endif %}
        <h2>{{ item.nombre }}</h2>
        <p><strong>Precio:</strong> ${{ item.precio }}</p>
        {% if item.descripcion %}<p><strong>DescripciÃ³n:</strong> {{ item.descripcion }}</p>{% endif %}
        {% if item.categoria %}<p><strong>CategorÃ­as:</strong> {{ item.categoria }}</p>{% endif %}
    </div>
</div>

<div id="modal-eliminar-{{ seccion }}-{{ item.id }}" class="modal">
    <div class="modal-content">
        <span class="close" onclick="cerrarModal('modal-eliminar-{{ seccion }}-{{ item.id }}')">&times;</span>
        <p>Â¿EstÃ¡s seguro que deseas eliminar <strong>{{ item.nombre }}</strong>?</p>

        <form action="{% if seccion == 'vinos' %}{% url 'catalogo:eliminar_producto' item.id %}{% else %}{% url 'catalogo:eliminar_combo' item.id %}{% endif %}" method="POST">
            {% csrf_token %}
            <button type="submit" class="btn-eliminar">Eliminar</button>
            <button type="button" class="btn-secundario" onclick="cerrarModal('modal-eliminar-{{ seccion }}-{{ item.id }}')">Cancelar</button>
        </form>
    </div>
</div>

{% empty %}
<p class="no-productos">No hay {{ seccion }} registrados aÃºn.</p>
{% endfor %}
